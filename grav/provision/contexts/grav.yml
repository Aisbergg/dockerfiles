---

# Load Dynamic Nginx Modules
NGINX_LOAD_NDK_HTTP_MODULE: {{ NGINX_TLS_ONLY }}
NGINX_LOAD_NGX_HTTP_LUA_MODULE: {{ NGINX_TLS_ONLY }}
NGINX_LOAD_NGX_HTTP_HEADERS_MORE_FILTER_MODULE: true

defaults:
  ######################################
  ## Nginx
  ######################################
  - NGINX_REDIRECT_TO_FIRST_DOMAIN: false
  - NGINX_CONN_LIMIT_PER_IP: 15
  - NGINX_REQ_LIMIT_PER_IP_RATE: 20
  - NGINX_REQ_LIMIT_PER_IP_BURST: 40
  - NGINX_FASTCGI_READ_TIMEOUT: 120
  - NGINX_CLIENT_MAX_BODY_SIZE: "512M"
  - NGINX_CLIENT_BODY_BUFFER_SIZE: 512
  - NGINX_TLS_ONLY: true

  ######################################
  ## PHP
  ######################################
  - PHP_MAX_CHILDREN: 50
  - PHP_MIN_SPARE_SERVERS: 1
  - PHP_MAX_SPARE_SERVERS: 5
  - PHP_MAX_EXECUTION_TIME: 60
  - PHP_MAX_INPUT_TIME: 60
  - PHP_MEMORY_LIMIT: "180M"
  - PHP_POST_MAX_SIZE: "512M"
  - PHP_OUTPUT_BUFFERING: 0

  # defaults for OPCache
  - OPCACHE_MEMORY_CONSUMPTION: 80
  - OPCACHE_INTERNED_STRINGS_BUFFER: 6
  - OPCACHE_MAX_ACCELERATED_FILES: 3000
  - OPCACHE_REVALIDATE_FREQ: 2
  - OPCACHE_SAVE_COMMENTS: 1
