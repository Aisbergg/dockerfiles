---

# Load Dynamic Nginx Modules
NGINX_LOAD_NDK_HTTP_MODULE: {{ NGINX_REWRITE_HTTPS }}
NGINX_LOAD_NGX_HTTP_LUA_MODULE: {{ NGINX_REWRITE_HTTPS }}
NGINX_LOAD_NGX_HTTP_HEADERS_MORE_FILTER_MODULE: true

defaults:
  ######################################
  ## Nginx
  ######################################
  NGINX_REDIRECT_TO_FIRST_DOMAIN: false
  NGINX_FASTCGI_READ_TIMEOUT: 120
  NGINX_MAX_UPLOAD_FILESIZE: 512M
  NGINX_REWRITE_HTTPS: true
  NGINX_DISALLOW_EMBED: true

  ######################################
  ## PHP
  ######################################
  PHP_MAX_CHILDREN: 50
  PHP_MIN_SPARE_SERVERS: 1
  PHP_MAX_SPARE_SERVERS: 2
  PHP_MAX_EXECUTION_TIME: 60
  PHP_MAX_INPUT_TIME: 60
  PHP_MEMORY_LIMIT: "180M"
  PHP_OUTPUT_BUFFERING: 0

  # defaults for OPCache
  OPCACHE_MEMORY_CONSUMPTION: 80
  OPCACHE_INTERNED_STRINGS_BUFFER: 6
  OPCACHE_MAX_ACCELERATED_FILES: 3000
  OPCACHE_REVALIDATE_FREQ: 2
  OPCACHE_SAVE_COMMENTS: 1
