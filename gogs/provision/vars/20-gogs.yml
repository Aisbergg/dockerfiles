---

GOGS_SECURITY_SECRET_KEY: "{{ SECRET_KEY }}"
GOGS_SESSION_COOKIE_SECURE: {{ NGINX_REWRITE_HTTPS }}

defaults:
  ######################################
  ## Nginx
  ######################################
  NGINX_PROXY_READ_TIMEOUT: 120
  NGINX_MAX_UPLOAD_FILESIZE: 256M
  NGINX_REWRITE_HTTPS: true

  ######################################
  ## Gogs
  ######################################
  GOGS_APP_NAME: "Gogs: Go Git Service"
  GOGS_RUN_MODE:
    type: choice
    default: prod
    choices:
      - "dev"
      - "prod"
      - "test"

  # server
  GOGS_SERVER_SSH_PORT: 22
  GOGS_SERVER_MINIMUM_KEY_SIZE_CHECK: true
  GOGS_SERVER_OFFLINE_MODE: false
  GOGS_SERVER_DISABLE_ROUTER_LOG: true
  GOGS_SERVER_ENABLE_GZIP: false
  GOGS_SERVER_LANDING_PAGE:
    type: choice
    default: home
    choices:
      - "explore"
      - "home"

  # repository
  GOGS_REPOSITORY_ANSI_CHARSET: "iso-8859-1"
  GOGS_REPOSITORY_FORCE_PRIVATE: false
  GOGS_REPOSITORY_MAX_CREATION_LIMIT: -1
  GOGS_REPOSITORY_PULL_REQUEST_QUEUE_LENGTH: 1000
  GOGS_REPOSITORY_MIRROR_QUEUE_LENGTH: 1000
  GOGS_REPOSITORY_PREFERRED_LICENSES: "MIT License,Apache License 2.0"
  GOGS_REPOSITORY_DISABLE_HTTP_GIT: false
  GOGS_REPOSITORY_ENABLE_LOCAL_PATH_MIGRATION: false
  GOGS_REPOSITORY_COMMITS_FETCH_CONCURRENCY: 0
  GOGS_REPOSITORY_ENABLE_RAW_FILE_RENDER_MODE: false

  # repository.editor
  GOGS_REPOSITORY_EDITOR_LINE_WRAP_EXTENSIONS: ".txt,.md,.markdown,.mdown,.mkd,"
  GOGS_REPOSITORY_EDITOR_PREVIEWABLE_FILE_MODES: "markdown"

  # repository.upload
  GOGS_REPOSITORY_UPLOAD_ENABLE_UPLOAD: true
  GOGS_REPOSITORY_UPLOAD_ALLOWED_TYPES: ""
  GOGS_REPOSITORY_UPLOAD_FILE_MAX_SIZE: 3
  GOGS_REPOSITORY_UPLOAD_MAX_FILES: 5

  # markdown
  GOGS_MARKDOWN_ENABLE_HARD_LINE_BREAK: false
  GOGS_MARKDOWN_CUSTOM_URL_SCHEMES: ""

  # http
  GOGS_ACCESS_CONTROL_ALLOW_ORIGIN: ""

  # database
  GOGS_DATABASE_TYPE:
    type: choice
    default: sqlite3
    choices:
      - "mysql"
      - "postgres"
      - "sqlite3"
  GOGS_DATABASE_HOST: "mysql"
  GOGS_DATABASE_PORT: 3306
  GOGS_DATABASE_NAME: "gogs"
  GOGS_DATABASE_USER: "gogs"
  GOGS_DATABASE_PASSWORD: ""
  GOGS_DATABASE_PGSQL_SSL_MODE:
    type: choice
    default: disable
    choices:
      - "disable"
      - "require"
      - "verify-full"

  # admin
  GOGS_ADMIN_DISABLE_REGULAR_ORG_CREATION: false

  # security
  GOGS_SECURITY_LOGIN_REMEMBER_DAYS: 7
  GOGS_SECURITY_REVERSE_PROXY_AUTHENTICATION_USER: "X-WEBAUTH-USER"
  GOGS_SECURITY_ENABLE_LOGIN_STATUS_COOKIE: false

  # service
  GOGS_SERVICE_ACTIVE_CODE_LIVE_MINUTES: 180
  GOGS_SERVICE_RESET_PASSWD_CODE_LIVE_MINUTES: 180
  GOGS_SERVICE_REGISTER_EMAIL_CONFIRM: false
  GOGS_SERVICE_DISABLE_REGISTRATION: false
  GOGS_SERVICE_REQUIRE_SIGNIN_VIEW: false
  GOGS_SERVICE_ENABLE_NOTIFY_MAIL: false
  GOGS_SERVICE_ENABLE_REVERSE_PROXY_AUTHENTICATION: false
  GOGS_SERVICE_ENABLE_REVERSE_PROXY_AUTO_REGISTRATION: false
  GOGS_SERVICE_ENABLE_CAPTCHA: true

  # webhook
  GOGS_WEBHOOK_TYPES: "gogs, slack, discord, dingtalk"
  GOGS_WEBHOOK_QUEUE_LENGTH: 1000
  GOGS_WEBHOOK_DELIVER_TIMEOUT: 15
  GOGS_WEBHOOK_SKIP_TLS_VERIFY: false
  GOGS_WEBHOOK_PAGING_NUM: 10

  # mailer
  GOGS_MAILER_ENABLE: false
  GOGS_MAILER_SEND_BUFFER_LEN: 100
  GOGS_MAILER_SUBJECT_PREFIX: "%(APP_NAME)s"
  GOGS_MAILER_HOST: ""
  GOGS_MAILER_SKIP_VERIFY: false
  GOGS_MAILER_FROM: ""
  GOGS_MAILER_USER: ""
  GOGS_MAILER_PASSWORD: ""
  GOGS_MAILER_DISABLE_HELO: false
  GOGS_MAILER_HELO_HOSTNAME: ""
  GOGS_MAILER_USE_PLAIN_TEXT: false

  # cache
  GOGS_CACHE_ADAPTER:
    type: choice
    default: memory
    choices:
      - "memcache"
      - "memory"
      - "redis"
  GOGS_CACHE_INTERVAL: 60
  GOGS_CACHE_HOST: ""

  # session
  GOGS_SESSION_PROVIDER:
    type: choice
    default: memory
    choices:
      - "file"
      - "memory"
      - "redis"
  GOGS_SESSION_PROVIDER_CONFIG: "/var/lib/gogs/data/sessions"
  GOGS_SESSION_COOKIE_NAME: "gogs_session"
  GOGS_SESSION_ENABLE_SET_COOKIE: true
  GOGS_SESSION_GC_INTERVAL_TIME: 86400
  GOGS_SESSION_SESSION_LIFE_TIME: 86400
  GOGS_SESSION_CSRF_COOKIE_NAME: "_csrf"

  # picture
  GOGS_PICTURE_GRAVATAR_SOURCE: "gravatar"
  GOGS_PICTURE_DISABLE_GRAVATAR: false
  GOGS_PICTURE_ENABLE_FEDERATED_AVATAR: false

  # attachment
  GOGS_ATTACHMENT_ENABLED: true
  GOGS_ATTACHMENT_ALLOWED_TYPES: "image/jpeg|image/png|image/gif"
  GOGS_ATTACHMENT_MAX_SIZE: 4
  GOGS_ATTACHMENT_MAX_FILES: 5

  # log
  GOGS_LOG_MODE:
    type: choice
    default: console
    choices:
      - "console"
      - "file"
      - "slack"
      - "xorm"
  GOGS_LOG_LEVEL:
    type: choice
    default: Info
    choices:
      - "Trace"
      - "Info"
      - "Warn"
      - "Error"
      - "Fatal"
  GOGS_LOG_FILES_LOG_ROTATE: true
  GOGS_LOG_FILES_DAILY_ROTATE: true
  GOGS_LOG_FILES_MAX_SIZE_SHIFT: 28
  GOGS_LOG_FILES_MAX_LINES: 1000000
  GOGS_LOG_FILES_MAX_DAYS: 7
  GOGS_LOG_SLACK_URL: ""
  GOGS_LOG_XORM_ROTATE: true
  GOGS_LOG_XORM_ROTATE_DAILY: true
  GOGS_LOG_XORM_MAX_SIZE: 100
  GOGS_LOG_XORM_MAX_DAYS: 3

  # cron
  GOGS_CRON_ENABLED: true
  GOGS_CRON_RUN_AT_START: false

  # cron.update_mirrors
  GOGS_CRON_UPDATE_MIRRORS_SCHEDULE: "@every 10m"

  # cron.repo_health_check
  GOGS_CRON_REPO_HEALTH_CHECK_SCHEDULE: "@every 24h"
  GOGS_CRON_REPO_HEALTH_CHECK_TIMEOUT: "60s"
  GOGS_CRON_REPO_HEALTH_CHECK_ARGS: "60s"

  # cron.check_repo_stats
  GOGS_CRON_CHECK_REPO_STATS_RUN_AT_START: true
  GOGS_CRON_CHECK_REPO_STATS_SCHEDULE: "@every 24h"

  # cron.repo_archive_cleanup
  GOGS_CRON_REPO_ARCHIVE_CLEANUP_RUN_AT_START: false
  GOGS_CRON_REPO_ARCHIVE_CLEANUP_SCHEDULE: "@every 24h"
  GOGS_CRON_REPO_ARCHIVE_CLEANUP_OLDER_THAN: "24h"

  # git
  GOGS_GIT_DISABLE_DIFF_HIGHLIGHT: false
  GOGS_GIT_MAX_GIT_DIFF_LINES: 10000
  GOGS_GIT_MAX_GIT_DIFF_LINE_CHARACTERS: 500
  GOGS_GIT_MAX_GIT_DIFF_FILES: 100
  GOGS_GIT_GC_ARGS: ""

  # git.timeout
  GOGS_GIT_TIMEOUT_MIGRATE: 600
  GOGS_GIT_TIMEOUT_MIRROR: 300
  GOGS_GIT_TIMEOUT_CLONE: 300
  GOGS_GIT_TIMEOUT_PULL: 300
  GOGS_GIT_TIMEOUT_GC: 60

  # mirror
  GOGS_MIRROR_DEFAULT_INTERVAL: 8

  # api
  GOGS_API_MAX_RESPONSE_ITEMS: 50

  # ui
  GOGS_UI_EXPLORE_PAGING_NUM: 20
  GOGS_UI_ISSUE_PAGING_NUM: 10
  GOGS_UI_FEED_MAX_COMMIT_NUM: 5
  GOGS_UI_THEME_COLOR_META_TAG: "#ff5343"
  GOGS_UI_MAX_DISPLAY_FILE_SIZE: 8388608

  # ui.admin
  GOGS_UI_ADMIN_USER_PAGING_NUM: 50
  GOGS_UI_ADMIN_REPO_PAGING_NUM: 50
  GOGS_UI_ADMIN_NOTICE_PAGING_NUM: 25
  GOGS_UI_ADMIN_ORG_PAGING_NUM: 50

  # ui.user
  GOGS_UI_USER_REPO_PAGING_NUM: 15
  GOGS_UI_USER_NEWS_FEED_PAGING_NUM: 20
  GOGS_UI_USER_COMMITS_PAGING_NUM: 30

  # other
  GOGS_OTHER_SHOW_FOOTER_BRANDING: false
  GOGS_OTHER_SHOW_FOOTER_VERSION: false
  GOGS_OTHER_SHOW_FOOTER_TEMPLATE_LOAD_TIME: false
