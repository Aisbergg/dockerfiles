---

# MODULES
REDIS_MODULES: {{ REDIS_MODULES | default('[]') }}
# SNAPSHOTTING
REDIS_SAVE: {{ REDIS_SAVE | default('[{seconds: 900, changes: 1},{seconds: 300, changes: 1},{seconds: 60, changes: 10000}]') }}
# SECURITY
REDIS_RENAME_COMMAND: {{ REDIS_RENAME_COMMAND | default('[{cmd: CONFIG, rename: ""}]') }}

defaults:
  # NETWORK
  - REDIS_BIND: "0.0.0.0"
  - REDIS_PROTECTED_MODE: True
  - REDIS_TCP_BACKLOG: 511
  - REDIS_UNIXSOCKET: ""
  - REDIS_UNIXSOCKETPERM: 777
  - REDIS_TIMEOUT: 0
  - REDIS_TCP_KEEPALIVE: 300

  # GENERAL
  - REDIS_LOGLEVEL:
    - "notice"
    - "debug"
    - "verbose"
    - "warning"

  - REDIS_LOGFILE: ""
  - REDIS_SYSLOG_ENABLED: False
  - REDIS_SYSLOG_IDENT: "redis"
  - REDIS_SYSLOG_FACILITY: "local0"
  - REDIS_DATABASES: 16

  # SNAPSHOTTING
  - REDIS_STOP_WRITES_ON_BGSAVE_ERROR: True
  - REDIS_RDBCOMPRESSION: True
  - REDIS_RDBCHECKSUM: True
  - REDIS_DBFILENAME: "dump.rdb"

  # REPLICATION
  - REDIS_SLAVEOF: ""
  - REDIS_MASTERAUTH: ""
  - REDIS_SLAVE_SERVE_STALE_DATA: True
  - REDIS_SLAVE_READ_ONLY: True
  - REDIS_REPL_DISKLESS_SYNC: False
  - REDIS_REPL_DISKLESS_SYNC_DELAY: 5
  - REDIS_REPL_PING_SLAVE_PERIOD: 10
  - REDIS_REPL_TIMEOUT: 60
  - REDIS_REPL_DISABLE_TCP_NODELAY: False
  - REDIS_REPL_BACKLOG_SIZE: "1mb"
  - REDIS_REPL_BACKLOG_TTL: 3600
  - REDIS_SLAVE_PRIORITY: 100
  - REDIS_MIN_SLAVES_TO_WRITE: 0
  - REDIS_MIN_SLAVES_MAX_LAG: 10
  - REDIS_SLAVE_ANNOUNCE_IP: ""
  - REDIS_SLAVE_ANNOUNCE_PORT: ""

  # SECURITY
  - REDIS_REQUIREPASS: ""

  # CLIENTS
  - REDIS_MAXCLIENTS: 10000

  # MEMORY MANAGEMENT
  - REDIS_MAXMEMORY: "0"
  - REDIS_MAXMEMORY_POLICY:
    - "noeviction"
    - "volatile-lru"
    - "allkeys-lru"
    - "volatile-lfu"
    - "allkeys-lfu"
    - "volatile-random"
    - "allkeys-random"
    - "volatile-ttl"
  - REDIS_MAXMEMORY_SAMPLES: 5

  # LAZY FREEING
  - REDIS_LAZYFREE_LAZY_EVICTION: False
  - REDIS_LAZYFREE_LAZY_EXPIRE: False
  - REDIS_LAZYFREE_LAZY_SERVER_DEL: False
  - REDIS_SLAVE_LAZY_FLUSH: False

  # APPEND ONLY MODE
  - REDIS_APPENDONLY: False
  - REDIS_APPENDFILENAME: "appendonly.aof"
  - REDIS_APPENDFSYNC:
    - "everysec"
    - "no"
    - "always"
  - REDIS_NO_APPENDFSYNC_ON_REWRITE: False
  - REDIS_AUTO_AOF_REWRITE_PERCENTAGE: 100
  - REDIS_AUTO_AOF_REWRITE_MIN_SIZE: "64mb"
  - REDIS_AOF_LOAD_TRUNCATED: True
  - REDIS_AOF_USE_RDB_PREAMBLE: False

  # LUA SCRIPTING
  - REDIS_LUA_TIME_LIMIT: 5000

  # REDIS CLUSTER
  - REDIS_CLUSTER_ENABLED: False
  - REDIS_CLUSTER_CONFIG_FILE: "nodes-6379.conf"
  - REDIS_CLUSTER_NODE_TIMEOUT: 15000
  - REDIS_CLUSTER_SLAVE_VALIDITY_FACTOR: 10
  - REDIS_CLUSTER_MIGRATION_BARRIER: 1
  - REDIS_CLUSTER_REQUIRE_FULL_COVERAGE: True

  # CLUSTER DOCKER/NAT support

  # SLOW LOG
  - REDIS_SLOWLOG_LOG_SLOWER_THAN: 10000
  - REDIS_SLOWLOG_MAX_LEN: 128

  # LATENCY MONITOR
  - REDIS_LATENCY_MONITOR_THRESHOLD: 0

  # EVENT NOTIFICATION
  - REDIS_NOTIFY_KEYSPACE_EVENTS: ""

  # ADVANCED CONFIG
  - REDIS_HASH_MAX_ZIPLIST_ENTRIES: 512
  - REDIS_HASH_MAX_ZIPLIST_VALUE: 64
  - REDIS_LIST_MAX_ZIPLIST_SIZE:
    - "-2"
    - "-5"
    - "-4"
    - "-3"
    - "-1"
  - REDIS_LIST_COMPRESS_DEPTH: 0
  - REDIS_SET_MAX_INTSET_ENTRIES: 512
  - REDIS_ZSET_MAX_ZIPLIST_ENTRIES: 128
  - REDIS_ZSET_MAX_ZIPLIST_VALUE: 64
  - REDIS_HLL_SPARSE_MAX_BYTES: 3000
  - REDIS_ACTIVEREHASHING: True
  - REDIS_CLIENT_OUTPUT_BUFFER_LIMIT_NORMAL: "0 0 0"
  - REDIS_CLIENT_OUTPUT_BUFFER_LIMIT_SLAVE: "256mb 64mb 60"
  - REDIS_CLIENT_OUTPUT_BUFFER_LIMIT_PUBSUB: "32mb 8mb 60"
  - REDIS_HZ: 10
  - REDIS_AOF_REWRITE_INCREMENTAL_FSYNC: True
  - REDIS_LFU_LOG_FACTOR: 10
  - REDIS_LFU_DECAY_TIME: 1

  # ACTIVE DEFRAGMENTATION
  - REDIS_ACTIVEDEFRAG: True
  - REDIS_ACTIVE_DEFRAG_IGNORE_BYTES: "100mb"
  - REDIS_ACTIVE_DEFRAG_THRESHOLD_LOWER: 10
  - REDIS_ACTIVE_DEFRAG_THRESHOLD_UPPER: 100
  - REDIS_ACTIVE_DEFRAG_CYCLE_MIN: 25
  - REDIS_ACTIVE_DEFRAG_CYCLE_MAX: 75
